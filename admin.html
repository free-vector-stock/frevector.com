<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN PANEL - FREE VECTOR STOCK</title>
    <style>
        body { margin: 0; font-family: 'Segoe UI', Arial, sans-serif; background: #f4f4f4; color: #333; }
        .header { background: #000; color: #fff; padding: 20px; text-align: center; font-size: 24px; font-weight: bold; }
        .container { max-width: 800px; margin: 40px auto; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { border-bottom: 2px solid #000; padding-bottom: 10px; }
        .upload-section { margin-top: 20px; border: 2px dashed #ccc; padding: 40px; text-align: center; cursor: pointer; }
        .upload-section:hover { border-color: #000; }
        input[type="file"] { display: none; }
        .btn { display: inline-block; background: #000; color: #fff; padding: 12px 25px; margin-top: 20px; cursor: pointer; border: none; font-size: 16px; }
        #status { margin-top: 20px; font-size: 14px; color: #666; }
        .file-list { margin-top: 20px; text-align: left; font-size: 13px; max-height: 200px; overflow-y: auto; background: #eee; padding: 10px; }
    </style>
</head>
<body>

<div class="header">FREE VECTOR STOCK - Management Console</div>

<div class="container">
    <h2>Bulk Asset Upload</h2>
    <p>Select multiple files (JPEG, EPS, SVG, and JSON). System will auto-match files by their names.</p>
    
    <div class="upload-section" onclick="document.getElementById('fileInput').click()">
        <strong>Click to select files</strong>
        <p>Drop JPEG, EPS10, SVG and JSON metadata files here.</p>
    </div>
    <input type="file" id="fileInput" multiple accept=".jpg,.jpeg,.eps,.svg,.json" onchange="handleFiles(this.files)">
    
    <div id="status"></div>
    <div id="fileList" class="file-list" style="display:none;"></div>
    
    <button class="btn" onclick="saveToLibrary()">Upload & Sync to Site</button>
</div>

<script>
    let uploadedFiles = {};

    function handleFiles(files) {
        const listDiv = document.getElementById('fileList');
        const status = document.getElementById('status');
        listDiv.innerHTML = "";
        listDiv.style.display = "block";
        
        for (let file of files) {
            const nameArr = file.name.split('.');
            const ext = nameArr.pop().toLowerCase();
            const rawName = nameArr.join('.');

            if (!uploadedFiles[rawName]) {
                uploadedFiles[rawName] = { name: rawName, jpeg: null, eps: null, svg: null, json: null };
            }

            if (ext === 'jpg' || ext === 'jpeg') uploadedFiles[rawName].jpeg = URL.createObjectURL(file);
            if (ext === 'eps') uploadedFiles[rawName].eps = "#"; // Simulation
            if (ext === 'svg') uploadedFiles[rawName].svg = URL.createObjectURL(file);
            if (ext === 'json') {
                // In real scenario, we'd parse the JSON here
                uploadedFiles[rawName].json = { title: rawName + " Vector", keywords: "vector, graphic, design", category: "Abstract" };
            }

            let item = document.createElement('div');
            item.innerText = `Detected: ${file.name}`;
            listDiv.appendChild(item);
        }
        status.innerText = `${files.length} files prepared for matching.`;
    }

    function saveToLibrary() {
        let currentData = JSON.parse(localStorage.getItem('vectorData') || "[]");
        Object.values(uploadedFiles).forEach(item => {
            currentData.push({
                id: Date.now() + Math.random(),
                title: item.json ? item.json.title : item.name,
                category: item.json ? item.json.category : "Miscellaneous",
                img: item.jpeg || "https://via.placeholder.com/400x300?text=No+Preview",
                eps: item.eps,
                svg: item.svg,
                keywords: item.json ? item.json.keywords : "free, vector, download"
            });
        });
        localStorage.setItem('vectorData', JSON.stringify(currentData));
        alert("Success! Assets have been synced to the main site.");
        location.reload();
    }
</script>

</body>
</html>
