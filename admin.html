<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ADMIN PANEL | FREE VECTOR STOCK</title>
    <style>
        body { font-family: sans-serif; background: #fff; margin: 0; }
        .header { background: #000; color: #fff; padding: 30px; text-align: center; font-weight: 900; letter-spacing: 2px; }
        .wrapper { max-width: 800px; margin: 40px auto; padding: 20px; border: 1px solid #eee; }
        input[type="password"] { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; }
        .upload-zone { border: 3px dashed #ccc; padding: 50px; text-align: center; cursor: pointer; background: #f9f9f9; }
        #statusLog { height: 200px; overflow-y: auto; background: #222; color: #0f0; padding: 15px; font-family: monospace; margin-top: 15px; }
        button { width: 100%; padding: 15px; background: #000; color: #fff; font-weight: bold; cursor: pointer; border: none; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="header">FREE VECTOR STOCK - ADMIN CLOUD</div>
    <div class="wrapper">
        <input type="password" id="tokenInp" placeholder="Enter GitHub Token">
        <div class="upload-zone" onclick="document.getElementById('fileInp').click()">
            <strong>CLICK TO SELECT ALL FILES (JPG, EPS, SVG, JSON)</strong>
        </div>
        <input type="file" id="fileInp" multiple style="display:none" onchange="document.getElementById('statusLog').innerText='Files ready to sync.'">
        <div id="statusLog">Ready...</div>
        <button onclick="startSync()">START BULK SYNC</button>
    </div>

    <script>
        const OWNER = "free-vector-stock", REPO = "free-vector-stock";
        async function startSync() {
            const token = document.getElementById('tokenInp').value;
            const files = Array.from(document.getElementById('fileInp').files);
            const log = document.getElementById('statusLog');
            if(!token || files.length === 0) return alert("Fill required fields!");
            
            log.innerHTML = "Syncing...<br>";
            for(let file of files) {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                await new Promise(res => {
                    reader.onload = async () => {
                        const base64 = reader.result.split(',')[1];
                        const path = `assets/${file.name}`;
                        let sha = null;
                        const check = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/${path}`, {
                            headers: {'Authorization': `token ${token}`}
                        });
                        if(check.ok) { const d = await check.json(); sha = d.sha; }
                        
                        const upload = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/${path}`, {
                            method: 'PUT',
                            headers: {'Authorization': `token ${token}`, 'Content-Type': 'application/json'},
                            body: JSON.stringify({message: "Sync", content: base64, sha: sha})
                        });
                        log.innerHTML += (upload.ok ? "✓ " : "✗ ") + file.name + "<br>";
                        log.scrollTop = log.scrollHeight;
                        res();
                    };
                });
            }
            log.innerHTML += "<strong>DONE.</strong>";
        }
    </script>
</body>
</html>
