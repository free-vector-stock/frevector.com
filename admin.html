<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Vektör Panel | Yükleme</title>
    <style>
        body { background: #111; color: #eee; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { background: #222; padding: 30px; border-radius: 15px; border: 2px solid #f39c12; width: 350px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 5px; border: 1px solid #444; background: #333; color: white; box-sizing: border-box; }
        .btn { background: #f39c12; color: #000; border: none; padding: 12px; width: 100%; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn:hover { background: #e67e22; }
        #log { font-size: 12px; margin-top: 15px; color: #aaa; }
    </style>
</head>
<body>
    <div class="box">
        <h2 style="color:#f39c12">Vektör Yükle</h2>
        <input type="text" id="token" placeholder="GitHub Token (ghp_...)" />
        <input type="text" id="title" placeholder="Dosya Başlığı (Örn: modern-logo)" />
        <p style="font-size:12px">Aşağıdan 1 EPS ve 1 JPG seçin:</p>
        <input type="file" id="files" multiple />
        <button class="btn" onclick="startUpload()">SİSTEME YÜKLE</button>
        <div id="log"></div>
    </div>

    <script>
        async function startUpload() {
            const token = document.getElementById('token').value;
            const title = document.getElementById('title').value;
            const files = document.getElementById('files').files;
            const log = document.getElementById('log');

            if (!token || !title || files.length < 2) {
                alert("Lütfen Token, Başlık ve 2 Dosyayı (EPS+JPG) eksiksiz girin!");
                return;
            }

            log.innerText = "Yükleme başladı...";

            for (let file of files) {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = async () => {
                    const content = reader.result.split(',')[1];
                    const cleanTitle = title.replace(/\s+/g, '-').toLowerCase();
                    const path = `vectors/${cleanTitle}/${file.name}`;
                    
                    const res = await fetch(`https://api.github.com/repos/hakankacar2014-demir/vector-storage/contents/${path}`, {
                        method: 'PUT',
                        headers: { 'Authorization': `token ${token}` },
                        body: JSON.stringify({ message: `Upload: ${title}`, content: content })
                    });

                    if (res.ok) {
                        log.innerHTML += `<br>✅ ${file.name} yüklendi.`;
                    } else {
                        log.innerHTML += `<br>❌ ${file.name} HATA! Token yanlış olabilir.`;
                    }
                };
            }
        }
    </script>
</body>
</html>
