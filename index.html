<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FREE VECTOR STOCK | Professional Graphic Resources</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --black: #000000; --white: #ffffff; --grey: #f8f8f8; --border: #e0e0e0; }
        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        /* Sağ Tık ve Seçim Engelleme */
        body { 
            margin: 0; background: var(--white); 
            -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;
        }
        
        header { background: var(--black); color: white; padding: 20px 0; text-align: center; }
        .logo { font-size: 26px; font-weight: 900; letter-spacing: 1px; text-decoration: none; color: white; }

        .search-area { padding: 40px 20px; border-bottom: 1px solid var(--border); text-align: center; }
        .search-input { width: 100%; max-width: 600px; padding: 15px 25px; border-radius: 30px; border: 1px solid #ccc; font-size: 16px; outline: none; }

        .container { display: flex; max-width: 1800px; margin: 0 auto; padding: 20px; gap: 20px; }
        
        /* Sidebar ve Reklam */
        aside { width: 250px; flex-shrink: 0; }
        .sidebar-cat { list-style: none; padding: 0; margin-top: 20px; }
        .sidebar-cat li { padding: 8px 0; font-size: 13px; color: #444; cursor: pointer; border-bottom: 1px solid #f0f0f0; }
        .sidebar-cat li:hover { color: #000; font-weight: bold; }
        .ad-box { background: #fafafa; border: 1px dashed #ccc; display: flex; align-items: center; justify-content: center; color: #999; font-size: 11px; text-transform: uppercase; margin-bottom: 20px; }

        /* Main Grid */
        main { flex: 1; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; }
        .card { border: 1px solid var(--border); position: relative; cursor: pointer; transition: 0.2s; background: #fff; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        
        /* Görsel Koruması: Sağ tıkı engellemek için görselin üzerine şeffaf bir katman */
        .img-container { position: relative; width: 100%; height: 180px; overflow: hidden; background: #eee; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; }
        .img-protection { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; }

        .card-info { padding: 12px; text-align: center; }
        .card-title { font-size: 12px; font-weight: bold; color: #333; margin-bottom: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .dl-btn { background: #000; color: #fff; border: none; padding: 8px 15px; font-size: 11px; font-weight: bold; width: 100%; cursor: pointer; }

        /* Sayfalama */
        .pagination { display: flex; justify-content: center; gap: 8px; margin: 50px 0; }
        .page-link { padding: 10px 16px; border: 1px solid #ddd; cursor: pointer; font-weight: bold; background: white; }
        .page-link.active { background: #000; color: #white; border-color: #000; color: white; }

        /* Related Section */
        .related-section { margin-top: 60px; border-top: 2px solid #000; padding-top: 30px; }
        .section-title { font-size: 20px; font-weight: 800; margin-bottom: 25px; }

        /* Modal / Detay Sayfası */
        #detailModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; overflow-y: auto; padding: 40px 0; }
        .modal-content { max-width: 1200px; margin: 0 auto; display: flex; gap: 40px; padding: 0 20px; }
        .modal-preview { flex: 1; }
        .modal-preview img { width: 100%; border: 1px solid #eee; }
        .modal-sidebar { width: 350px; }
        .big-dl-btn { width: 100%; padding: 20px; background: #000; color: #fff; font-size: 18px; font-weight: bold; border: none; cursor: pointer; margin-bottom: 15px; }

        @media (max-width: 768px) { .container { flex-direction: column; } aside { width: 100%; } .modal-content { flex-direction: column; } }
    </style>
</head>
<body oncontextmenu="return false;"> <header>
    <a href="index.html" class="logo">FREE VECTOR STOCK</a>
</header>

<div class="search-area">
    <input type="text" id="searchInp" class="search-input" placeholder="Search for vectors, icons and backgrounds..." onkeyup="if(event.key==='Enter') runSearch()">
</div>

<div class="container">
    <aside>
        <div class="ad-box" style="height: 250px;">ADVERTISING AREA</div>
        <h4 style="margin-bottom:10px; border-bottom: 1px solid #000;">CATEGORIES</h4>
        <ul class="sidebar-cat" id="categoryList"></ul>
        <div class="ad-box" style="height: 400px; margin-top: 20px;">ADVERTISING AREA</div>
    </aside>

    <main>
        <div class="ad-box" style="height: 90px; margin-bottom: 25px;">TOP LEADERBOARD AD</div>
        
        <div class="grid" id="mainGrid"></div>
        
        <div class="pagination" id="pagination"></div>

        <div class="related-section">
            <div class="section-title">Related Stock Vectors</div>
            <div class="grid" id="relatedGrid"></div>
        </div>
        
        <div class="ad-box" style="height: 120px; margin-top: 40px;">FOOTER AD AREA</div>
    </main>
</div>

<div id="detailModal">
    <div class="modal-content">
        <div class="modal-preview">
            <button onclick="closeModal()" style="margin-bottom: 20px; cursor: pointer; font-weight: bold;">← BACK TO RESULTS</button>
            <div class="img-container" style="height: auto;">
                <img id="modalImg" src="">
                <div class="img-protection"></div>
            </div>
            <h2 id="modalTitle" style="margin-top: 20px;"></h2>
            <p id="modalDesc" style="color: #666; line-height: 1.6;"></p>
        </div>
        <div class="modal-sidebar">
            <div class="ad-box" style="height: 250px;">SIDEBAR AD</div>
            <button class="big-dl-btn" onclick="downloadFile('eps')">DOWNLOAD EPS (VECTOR)</button>
            <button class="big-dl-btn" style="background: #444;" onclick="downloadFile('jpg')">DOWNLOAD JPG</button>
            <button class="big-dl-btn" style="background: #888;" onclick="downloadFile('svg')">DOWNLOAD SVG</button>
            <div class="ad-box" style="height: 300px;">SIDEBAR AD</div>
        </div>
    </div>
</div>

<script>
    const GITHUB_USER = "free-vector-stock", GITHUB_REPO = "free-vector-stock";
    let database = [], filtered = [], currentPage = 1, itemsPerPage = 30;

    const categories = ["Abstract","Animals","Backgrounds","Business","Education","Food","Drink","Nature","Objects","People","Technology","Icons"].sort();

    async function init() {
        const catContainer = document.getElementById('categoryList');
        categories.forEach(c => {
            const li = document.createElement('li');
            li.innerText = c;
            li.onclick = () => {
                document.getElementById('searchInp').value = c;
                runSearch();
            };
            catContainer.appendChild(li);
        });
        await loadData();
    }

    async function loadData() {
        const res = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}/contents/assets?t=${Date.now()}`);
        const files = await res.json();
        const map = {};
        files.forEach(f => {
            const [id, ext] = f.name.split('.');
            if(!map[id]) map[id] = { id };
            map[id][ext] = f.download_url;
        });
        database = Object.values(map).filter(i => i.jpg);
        filtered = [...database];
        renderGrid(1);
        renderRelated();
    }

    function renderGrid(page) {
        currentPage = page;
        const start = (page - 1) * itemsPerPage;
        const items = filtered.slice(start, start + itemsPerPage);
        
        const grid = document.getElementById('mainGrid');
        grid.innerHTML = items.map(i => `
            <div class="card" onclick="openModal('${i.id}')">
                <div class="img-container">
                    <img src="${i.jpg}">
                    <div class="img-protection"></div>
                </div>
                <div class="card-info">
                    <div class="card-title">${i.id.replace(/-/g, ' ')}</div>
                    <button class="dl-btn">FREE DOWNLOAD</button>
                </div>
            </div>
        `).join('');
        
        renderPagination();
    }

    function renderPagination() {
        const totalPages = Math.ceil(filtered.length / itemsPerPage);
        const pag = document.getElementById('pagination');
        if(totalPages <= 1) { pag.innerHTML = ""; return; }
        
        let html = "";
        for(let i = 1; i <= totalPages; i++) {
            html += `<div class="page-link ${i === currentPage ? 'active' : ''}" onclick="renderGrid(${i}); window.scrollTo(0,0);">${i}</div>`;
        }
        pag.innerHTML = html;
    }

    function renderRelated() {
        const shuffled = [...database].sort(() => 0.5 - Math.random()).slice(0, 20);
        const relGrid = document.getElementById('relatedGrid');
        relGrid.innerHTML = shuffled.map(i => `
            <div class="card" onclick="openModal('${i.id}')">
                <div class="img-container">
                    <img src="${i.jpg}">
                    <div class="img-protection"></div>
                </div>
                <div class="card-info">
                    <div class="card-title">${i.id.replace(/-/g, ' ')}</div>
                    <button class="dl-btn">FREE DOWNLOAD</button>
                </div>
            </div>
        `).join('');
    }

    let activeItem = null;
    function openModal(id) {
        activeItem = database.find(x => x.id === id);
        document.getElementById('modalImg').src = activeItem.jpg;
        document.getElementById('modalTitle').innerText = id.replace(/-/g, ' ').toUpperCase();
        document.getElementById('modalDesc').innerText = "Premium quality free vector illustration. Available in high resolution JPG, EPS10 and SVG formats for professional use.";
        document.getElementById('detailModal').style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function closeModal() {
        document.getElementById('detailModal').style.display = 'none';
        document.body.style.overflow = 'auto';
    }

    function downloadFile(format) {
        const url = activeItem[format];
        if(!url) return alert("Format not available for this file.");
        const a = document.createElement('a');
        a.href = url;
        a.download = `${activeItem.id}.${format}`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }

    function runSearch() {
        const term = document.getElementById('searchInp').value.toLowerCase();
        filtered = database.filter(i => i.id.toLowerCase().includes(term));
        renderGrid(1);
    }

    init();
</script>
</body>
</html>
